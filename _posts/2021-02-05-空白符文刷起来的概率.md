---
layout:		post
title:		空白符文刷起来的概率
date:		2021-02-05
author:		wyj
catalog:	true
tags:
    - 组合数学
    - 以撒
---

这是一篇非常水的文章。由于我今天颓废的过程中塔罗衣+一个空白符文就莫名其妙地刷了起来，我对此现象特别好奇，就开始研究背后的真实机制。

![](/img/20210205/1.jpg)

# 塔罗衣+空白符文的具体机制

塔罗衣的效果：卡牌效果发挥两次  
空白符文的效果：触发随机符文的效果（**除了黑符文**和自身），有$\dfrac{1}{4}$的概率再掉落一张空白符文

那么具体来说两者是怎么配合的呢？使用控制台多做几次实验就可以发现，空白符文会依次进行：

- 触发**两次**同一随机符文的效果
- 概率掉落空白符文
- 再触发**两次**同一随机符文的效果（两次随机是独立的）
- 概率掉落空白符文

而Jera触发两次的效果是把一切基础（除自身）复制成$4$份，当然也会复制空白符文（**第二次作用如果触发Jera，会复制第一次作用后概率掉落的空白符文**）。

所以说，如果当前房间内有一张Jera（或Perthro等任意你想复制的基础）和一些空白符文，就有可能得到很多的Jera（或Perthro等），空白符文起到白卡+Jera的作用。

# 概率分析

截止到忏悔发行之前，以撒里的符文一共有$10$种，排除掉黑符文和空白符文，还有$8$种（Ehwaz, Ansuz, Perthro, Jera, Dagaz, Algiz, Berkano, Hagalaz，排名分先后），所以一次触发Jera的概率是$\dfrac{1}{8}$。

所以如何严格定义“刷起来”这个事呢？我的第一想法是求复制出来的基础个数的期望。后来我意识到这肯定是$\infty$：有一个$\gt 0$的概率将空白符文复制到$10000$张，这种情况下空白符文用完的概率显然是$\lt 1$的，所以感性理解一下就知道这不是一个好的指标。然后我就想用“基础能复制出$\infty$个的概率”来定义刷的效率，但这不是特别好求的。转念一想，如果空白符文在某个时刻用完了，基础肯定不能复制出$\infty$个；如果空白符文没有用完，意味着我会无限次使用空白符文，而在这无限次使用中只出现了有限次Jera的概率显然是$0$。所以“基础能复制出$\infty$个的概率”等于空白符文永远都用不完的概率。我们就把它称为刷起来的概率好了。

# 数值计算

经过BM、搜索等尝试，我认为最后的结果是不可能有解析解的，至少不是代数数。但是很神奇的是，无论是忽略触发Jera的概率，还是忽略空白符文掉落自己的概率，得到的结果都是有意义的，而且都有解析解。在此略过不谈。

我们显然有一个$O(n^2)$的暴力来求出拍$n$次空白符文之后，空白符文还没用完的概率。实际上，拍$1000$次和拍$30000$次之后的概率已经几乎无差别，无论最初空白符文有$1$张还是$10$张。颠覆我认知的是，就算**没有塔罗衣**，只有$2$张空白符文，你也能有$4.315180236188902\%$的概率左脚踩右脚上天，得到无穷多的基础（让我想起那个能开出Jera的银箱子）。如果你有$7$张空白符文，刷起来的概率就超过了50%（但这不太现实）。有塔罗衣就更离谱了，$1$张空白符文就有$6.530791085495156\%$的概率刷起来，$2$张空白符文有$34.296510596775347\%$的概率，$3$张有$57.483960905066665\%$，已经过半了。所以说塔罗衣+符文袋几乎是肯定可以刷起来的。

# 后记

八层，你看着终于堆积起来的满地的空白符文，欣喜若狂，却一脚踩空掉进了Ehwaz的洞里$\dots$你拿的是全家福$\dots$
